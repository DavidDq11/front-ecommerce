<div class="search-container">
  <!-- Input de búsqueda -->
  <div class="search-input-wrapper">
    <i class="fa-solid fa-magnifying-glass search-icon"></i>
    
    <input
      [formControl]="searchControl"
      type="text"
      placeholder="Busca productos para tus mascotas..."
      class="search-input"
      aria-label="Busca productos para tus mascotas"
      autocomplete="off"
      spellcheck="false"
    />
    
    <button
      *ngIf="searchControl.value"
      (click)="clearSearch()"
      class="clear-button"
      type="button"
      aria-label="Limpiar búsqueda"
    >
      <i class="fa-solid fa-xmark"></i>
    </button>
  </div>

  <!-- Sugerencias -->
  <ul
    *ngIf="suggestions.length > 0"
    class="suggestions-list"
    role="listbox"
  >
    <li
      *ngFor="let product of suggestions; trackBy: trackByProductId"
      (click)="selectSuggestion(product)"
      class="suggestion-item"
      role="option"
      tabindex="0"
      [attr.aria-label]="'Producto: ' + product.title"
    >
      <img
        [src]="product.images?.[0]?.image_url || 'assets/placeholder.jpg'"
        [alt]="product.title"
        class="product-image"
        (error)="onImageError($event)"
      />
      <div class="product-info">
        <p class="product-title">{{ product.title }}</p>
        <p class="product-category">{{ product.animal_category || product.category || 'General' }}</p>
        <p class="product-price">
          {{ (product.sizes?.[0]?.price ?? product.price) | currency:'COP':'symbol':'1.0-0' }}
        </p>
      </div>
    </li>
  </ul>

  <!-- Estado de carga -->
  <div *ngIf="isLoading" class="loading-state">
    <p class="loading-text">Cargando...</p>
  </div>

  <!-- Sin resultados (opcional) -->
  <div *ngIf="!isLoading && searchControl.value && suggestions.length === 0" class="no-results">
    <p class="no-results-text">No se encontraron productos</p>
  </div>
</div>