<!-- promotion-products.component.html -->
<section class="bg-white mx-auto max-w-[1300px] px-3 sm:px-4 py-4 sm:py-8 min-h-screen">
  <!-- ✅ BREADCRUMB MEJORADO PARA MÓVILES -->
  <nav class="breadcrumb-promotions" aria-label="Breadcrumb">
    <ol>
      <!-- Inicio -->
      <li class="inline-flex items-center">
        <a routerLink="/" 
           class="inline-flex items-center hover:scale-105 transition-transform">
          <svg class="w-4 h-4 mr-1 sm:mr-2 flex-shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
            <path d="m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"/>
          </svg>
          <span class="home-text hidden xs:inline">Inicio</span>
        </a>
      </li>
      
      <!-- Separador -->
      <li class="inline-flex items-center">
        <i class="fa-solid fa-chevron-right text-yellow-300 text-xs"></i>
      </li>
      
      <!-- Página actual -->
      <li class="inline-flex items-center">
        <span class="inline-flex items-center">
          <i class="fa-solid fa-tag mr-1 sm:mr-2"></i>
          <span class="hidden sm:inline">Promociones</span>
          <span class="sm:hidden">Ofertas</span>
        </span>
      </li>
      
      <!-- Información de la marca -->
      <li *ngIf="hasWeeklyDeal && weeklyBrandName" class="inline-flex items-center">
        <i class="fa-solid fa-chevron-right text-yellow-300 text-xs mx-1 sm:mx-2"></i>
        <span class="inline-flex items-center bg-orange-700 px-2 py-1 rounded-lg">
          <i class="fa-solid fa-bolt mr-1 text-yellow-300"></i>
          <span class="hidden sm:inline">{{ weeklyBrandName }}</span>
          <span class="sm:hidden">{{ weeklyBrandName | slice:0:8 }}{{ weeklyBrandName.length > 8 ? '...' : '' }}</span>
          <span class="ml-1">-{{ weeklyDiscountPercent }}%</span>
        </span>
      </li>
    </ol>
  </nav>

  <!-- Header mejorado para móviles -->
  <div class="text-center mb-6 sm:mb-8 px-2">
    <div class="flex items-center justify-center gap-2 sm:gap-3 mb-3 sm:mb-4">
      <i class="fa-solid fa-calendar-week text-orange-600 text-2xl sm:text-3xl"></i>
      <h1 class="text-2xl sm:text-3xl md:text-4xl font-bold text-gray-800">
        Productos en <span class="text-orange-600">Promoción</span>
      </h1>
      <i class="fa-solid fa-tag text-orange-600 text-2xl sm:text-3xl"></i>
    </div>
    
    <!-- Banner de oferta -->
    <div class="bg-gradient-to-r from-orange-50 to-yellow-50 border border-orange-200 rounded-xl p-3 sm:p-4 max-w-2xl mx-auto mb-4 shadow-sm" 
         *ngIf="weeklyBrandName">
      <p class="text-base sm:text-lg font-semibold text-orange-800 mb-1">
        <i class="fa-solid fa-bolt text-yellow-500 mr-2"></i>
        Oferta de la Semana: <strong class="text-orange-600">{{ weeklyBrandName }}</strong> -{{ weeklyDiscountPercent }}% OFF
      </p>
      <p class="text-xs sm:text-sm text-orange-600">
        Todos los productos de esta marca tienen descuento especial
      </p>
    </div>

    <p class="text-sm sm:text-lg text-gray-600 max-w-2xl mx-auto px-2">
      Descubre las ofertas especiales de esta semana con descuentos exclusivos
    </p>
  </div>

  <!-- Loading State mejorado -->
  <div *ngIf="isLoading" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 sm:gap-4 px-2">
    <app-cardskeleton *ngFor="let i of [1,2,3,4,5,6,7,8,9,10]"></app-cardskeleton>
  </div>

  <!-- Productos en promoción -->
  <div *ngIf="!isLoading && promotionProducts.length > 0" class="px-2">
    <div class="mb-4 text-sm text-gray-600 bg-gray-50 p-3 rounded-lg">
      <i class="fa-solid fa-info-circle text-blue-500 mr-2"></i>
      Mostrando <strong>{{ paginatedProducts.length }}</strong> de <strong>{{ totalItems }}</strong> productos en promoción
      <span *ngIf="hasWeeklyDeal && weeklyBrandName" class="font-semibold text-orange-600 ml-1">
        de {{ weeklyBrandName }}
      </span>
    </div>

    <!-- Grid de productos responsive -->
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 sm:gap-4 md:gap-5">
      <app-productcard 
        *ngFor="let product of paginatedProducts" 
        [product]="product">
      </app-productcard>
    </div>

    <!-- Paginación mejorada para móviles -->
    <div class="flex flex-col sm:flex-row justify-center items-center mt-6 sm:mt-8 space-y-3 sm:space-y-0 sm:space-x-3" *ngIf="totalPages > 1">
      <button (click)="previousPage()" [disabled]="currentPage === 1" 
              class="w-full sm:w-auto px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-all flex items-center justify-center gap-2 font-medium">
        <i class="fa-solid fa-chevron-left"></i>
        <span>Anterior</span>
      </button>
      
      <div class="flex space-x-1 order-first sm:order-none">
        <button *ngFor="let page of getPageNumbers()" 
                (click)="goToPage(page)"
                [class]="currentPage === page ? 
                         'px-3 py-2 bg-blue-700 text-white rounded-lg font-semibold' : 
                         'px-3 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all'">
          {{ page }}
        </button>
      </div>
      
      <button (click)="nextPage()" [disabled]="currentPage === totalPages"
              class="w-full sm:w-auto px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 transition-all flex items-center justify-center gap-2 font-medium">
        <span>Siguiente</span>
        <i class="fa-solid fa-chevron-right"></i>
      </button>
    </div>
  </div>

  <!-- Empty State mejorado -->
  <div *ngIf="!isLoading && promotionProducts.length === 0" 
       class="text-center py-12 sm:py-16 text-gray-500 px-4">
    <i class="fa-solid fa-tag text-5xl sm:text-6xl mb-4 text-gray-300"></i>
    <h3 class="text-lg sm:text-xl font-semibold mb-2 text-gray-600">No hay promociones esta semana</h3>
    <p class="mb-6 text-sm sm:text-base">Vuelve pronto para descubrir nuevas ofertas</p>
    <a routerLink="/" 
       (click)="scrollToTop()"
       class="inline-block px-6 py-3 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-all font-medium shadow-lg transform hover:scale-105">
      <i class="fa-solid fa-home mr-2"></i> Volver al Inicio
    </a>
  </div>
</section>